version: 2

models:
  - name: fct_transactions_items
    description: "Fact table at the transaction-item grain, capturing item-level sales, discounts, and totals. Supports analysis of basket composition, revenue, loyalty program impact, and product performance across time, stores, and payment methods."
    columns:
      - name: transaction_fk
        data_type: varchar
        description: "Surrogate foreign key referencing the transaction dimension."

      - name: user_fk
        data_type: varchar
        description: "Surrogate foreign key referencing the user dimension, linking purchases to customer demographics and loyalty status."
      
      - name: store_fk
        data_type: varchar
        description: "Surrogate foreign key referencing the store dimension, enabling store-level performance analysis."
      
      - name: payment_fk
        data_type: varchar
        description: "Surrogate foreign key referencing the payment method dimension, supporting analysis of customer payment preferences."
     
      - name: item_fk
        data_type: varchar
        description: "Surrogate foreign key referencing the menu item dimension, providing product-level insights."

      - name: voucher_fk
        data_type: varchar
        description: "Surrogate foreign key referencing the voucher dimension, capturing discount application at the item level."
     
      - name: date_fk
        data_type: varchar
        description: "Foreign key linking to the date dimension, supporting time-series sales analysis."
     
      - name: transaction_id
        data_type: varchar
        description: "Business key from the source system uniquely identifying each transaction."
      
      - name: quantity
        data_type: hugeint
        description: "Number of units of the item purchased in the transaction."
      
      - name: gross_total
        data_type: double
        description: "Total before discounts for the item(s) in the transaction."
     
      - name: discount_amount
        data_type: double
        description: "Discount applied to the item(s), if any, from vouchers or loyalty offers."
      
      - name: net_total
        data_type: double
        description: "Final amount paid after discounts. Should equal gross_total - discount_amount."

      - name: loaded_at
        data_type: timestamp with time zone
        description: "ETL load timestamp for audit and lineage tracking."
