models:
  - name: fct_transactions
    description: "Fact table that records each customer transaction, including details about the user, store, payment method, discounts, and calculated totals."
    columns:
      - name: transaction_pk
        data_type: varchar
        description: "Primary key that uniquely identifies each transaction record in the warehouse."
        data_tests:
          - not_null
          - unique

      - name: user_fk
        data_type: varchar
        description: "Foreign key referencing the customer (user) who performed the transaction."

      - name: store_fk
        data_type: varchar
        description: "Foreign key referencing the store where the transaction took place."

      - name: payment_fk
        data_type: varchar
        description: "Foreign key referencing the payment method used for the transaction."

      - name: voucher_fk
        data_type: varchar
        description: "Foreign key referencing the voucher applied to the transaction, if any."

      - name: date_fk
        data_type: varchar
        description: "Foreign key referencing the date dimension for the transaction date."

      - name: transaction_seq
        data_type: bigint
        description: "Sequential identifier for transactions, often used for ordering or deduplication."

      - name: customer_sales_seq
        data_type: bigint
        description: "Sequential counter of sales at the customer level, useful for tracking repeat purchases."

      - name: nvsr
        data_type: varchar
        description: "Normalized value sales reference or identifier, used for reconciliation and reporting."

      - name: customer_lifetime_value
        data_type: double
        description: "Cumulative total value of all transactions made by the customer up to this point."

      - name: fdos
        data_type: date
        description: "First date of sale (FDOS) for the customer, marking the start of their purchase history."

      - name: quantity
        data_type: hugeint
        description: "Number of items purchased in the transaction."

      - name: gross_total
        data_type: double
        description: "Total monetary value of the transaction before discounts."

      - name: discount_applied
        data_type: double
        description: "Total discount amount applied to the transaction."

      - name: net_total
        data_type: double
        description: "Final total value of the transaction after applying discounts."

      - name: loaded_at
        data_type: timestamp with time zone
        description: "Timestamp indicating when the record was loaded into the warehouse."
